<app-header></app-header>
<router-outlet></router-outlet>

<div class="detail-bar">
    <div class="infor-detail">
        <img class="avatar-detail" src="https://spiritdogtraining.com/wp-content/uploads/2021/02/husky-eye-color.jpg" alt="">
        <h3 class="name-detail">Husky</h3>
        <!-- <div class="option-detail"> -->
            <!-- <button class="profile-btn" mat-fab extended (click)="openProfile()">Hồ sơ</button>
            <button class="erecord-btn" mat-fab extended (click)="openERecord()">Bệnh án điện tử</button> -->
        <!-- </div> -->
        <button [ngClass]="profileBtn" mat-fab extended (click)="openProfile()">Hồ sơ</button>
        <button [ngClass]="erecordBtn" mat-fab extended (click)="openERecord()">Bệnh án điện tử</button>
    </div>
</div>

<div class="profile-tab" *ngIf="statusTab">
    <div class="profile-tab-container">
        <button [ngClass]="basicDetail" mat-fab extended (click)="openBasicDetail()">
            Thông tin cơ bản
        </button>
        <button [ngClass]="healthHistoryst" mat-fab extended (click)="openHealthHistory()">
            Lịch sử sức khoẻ
        </button>
        <button [ngClass]="injectionHistory" mat-fab extended (click)="openInjectionhHistory()">
            Lịch sử tiêm phòng
        </button>
    </div>
</div>

<div class="basic-profile" *ngIf="profiltTabStatus === 1">
<!-- <div class="basic-profile" *ngIf="profiltTabStatus === 1">     -->
    <div class="left-group">
        <div class="form-group">
            <input autocomplete="off" required class="form-control mt-1" placeholder="Tên" [(ngModel)]="petName">
        </div>
        <div class="form-group mt-3">
            <input autocomplete="off" required type="text" class="form-control mt-1" placeholder="Loài" [(ngModel)]="petSpecies">
        </div>
        <div class="form-group mt-3">
            <input autocomplete="off" required type="text" class="form-control mt-1" placeholder="Ngày sinh" [(ngModel)]="petAge">
        </div>
        <div class="form-group mt-3">
            <input autocomplete="off" required type="text" class="form-control mt-1" placeholder="Ngày sinh" [(ngModel)]="petIdentifying">
        </div>
    </div>

    <div class="right-group">
        <form>
            <label class="file-upload">
                <div class="update-right">
                    <img style="height: 150px;width: 150px" class="update-avatar" src="{{ imagePet }}" alt=""><br>
                    <!-- <input type="file" (change)="onChange($event)"/> -->
                    <!-- <button class="update-btn" mat-fab extended (click)="openProfile()">Cập nhật</button> -->
                </div>
                <!-- <div *ngIf="myImage">
                    <img [src]="myImage" alt="">
                    <input type="file" (change)="onChange($event)"/>
                </div> -->
            </label>
        </form>
    </div>
</div>


<div class="basic-profile" *ngIf="profiltTabStatus === 2">
    <div class="left-group health-history">
        <form *ngFor="let i of healthPetList">
            <textarea class="form-control" id="" rows="5" cols="50" value="{{ i.description }}" [disabled]="true"></textarea>
        </form>
        <form>
            <textarea class="form-control" id="" rows="5" cols="50" [(ngModel)]="descriptionHealth" [ngModelOptions]="{standalone: true}"></textarea>
        </form>
    </div>
    <div class="right-group">
        <form>
            <div class="update-right">
                <!-- <button mat-fab class="openTextArea">
                    <mat-icon>add</mat-icon>
                </button><br><br> -->
                <button mat-fab extended (click)="addHealthHistory()">Cập nhật</button>
            </div>
        </form>
    </div>
</div>


<div class="basic-profile sub-basic-profile" *ngIf="profiltTabStatus === 3">
    <div class="add-btn">
        <button type="button" mat-fab class="insert" data-toggle="modal" (click)="openAddVacination(addVacinationForm)"><mat-icon>add</mat-icon></button>
    </div>

    <div class="table-field">
        <table class="table">
            <thead>
              <tr>
                <th scope="col">Tên thuốc</th>
                <th scope="col">Mô tả</th>
                <th scope="col">Ảnh</th>
                <th scope="col">Ngày tiêm</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let i of listVacinationHistory">
                <td>{{ i.name }}</td>
                <td>{{ i.description }}</td>
                <td><img style="width: 100px;height: 100px" [src]="i.vaccin_image" alt="Vaccine Image"></td>
                <td>{{ i.injection_date }}</td>
              </tr>
            </tbody>
        </table>
    </div>


    


    <!-- <div class="left-group">
        <form>
            <textarea class="form-control" id="" rows="5" cols="50"></textarea>
        </form>
    </div>
    <div class="right-group">
        <form>
            <div class="update-right">
                <button mat-fab class="openTextArea">
                    <mat-icon>add</mat-icon>
                </button><br><br>
                <button mat-fab extended>Cập nhật</button>
            </div>
        </form> -->
        <!-- <div class="modal-body">
            <div class="form-group">
                <form>
                    <div class="form-group">
                        <input autocomplete="off" required type="text" class="form-control mt-1" placeholder="Tên vaccine" [(ngModel)] = "vaccine" [ngModelOptions]="{standalone: true}">
                    </div>
                    <div class="form-group">
                        <textarea class="form-control" id="" rows="10" cols="50" [(ngModel)]="descriptionVacineHistory" [ngModelOptions]="{standalone: true}"></textarea>
                    </div>
                    <div class="form-group">
                        <input autocomplete="off" required type="date" class="form-control mt-1" placeholder="Tên vaccine" [(ngModel)] = "injection_date" [ngModelOptions]="{standalone: true}">
                    </div>
                    <div class="form-group">
                        <input autocomplete="off" (change)="onFileChangeVaccine($event)" required type="file" class="form-control mt-1" placeholder="Tên vaccine">
                    </div>
                </form>
            </div>
            <button class="save-record" mat-fab extended *ngIf="rightPopupIndex===3" (click)="addVaccinateHistory()">
                Lưu
            </button>
        </div> -->
    <!-- </div> -->
</div>





<div class="erecord-tab" *ngIf="!statusTab">
    <table class="table">
        <thead>
          <tr>
            <th scope="col">Ngày khám</th>
            <th scope="col">Bác sĩ</th>
            <th scope="col">Chuẩn đoán sơ bộ </th>
            <th scope="col">Thông tin chi tiết </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let i of recordPetList">
            <td>{{ i.examination_date }}</td>
            <td>{{ i.doctorDto.user_name }}</td>
            <td>{{ i.test_results }}</td>
            <td>
              <button mat-fab class="mat-fab" (click)="viewDetail(i,viewDetailForm)">
                <mat-icon>remove_red_eye</mat-icon>
              </button>        
            </td>
          </tr>
        </tbody>
    </table>
</div>


<ng-template #addVacinationForm>
        <form ngNativeValidate>
            <div class="modal-header">
                <b><h1 class="modal-title pull-left">Thêm lịch sử tiêm phòng</h1></b>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <form>
                        <div class="form-group">
                            <input autocomplete="off" required type="text" class="form-control mt-1" placeholder="Tên vaccine" [(ngModel)] = "vaccine" [ngModelOptions]="{standalone: true}">
                        </div>
                        <div class="form-group">
                            <textarea class="form-control" id="" rows="10" cols="50" [(ngModel)]="descriptionVacineHistory" [ngModelOptions]="{standalone: true}"></textarea>
                        </div>
                        <div class="form-group">
                            <input autocomplete="off" required type="date" class="form-control mt-1" placeholder="Tên vaccine" [(ngModel)] = "injection_date" [ngModelOptions]="{standalone: true}">
                        </div>
                        <div class="form-group">
                            <input autocomplete="off" (change)="onFileChangeVaccine($event)" required type="file" class="form-control mt-1" placeholder="Tên vaccine">
                        </div>
                    </form>
                </div>
            <button class="save-record" mat-fab extended (click)="addVaccinateHistory()">
                Lưu
            </button>
            </div>
        </form>
</ng-template>




<ng-template #viewDetailForm>
    <form ngNativeValidate>
      <div class="modal-header">
        <b><h1 class="modal-title pull-left">Xem chi tiết bệnh án điện tử</h1></b>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="username">Loại thuốc</label>
          <input [disabled]="true" class="form-control mt-1" [(ngModel)]="medications" [ngModelOptions]="{standalone: true}">
        </div>
        <div class="form-group">
            <label for="username">Dưỡng chất</label>
            <input [disabled]="true" class="form-control mt-1" [(ngModel)]="nutrition" [ngModelOptions]="{standalone: true}">
        </div>

        <div class="form-group">
            <label for="username">Ngày khám</label>
            <input [disabled]="true" class="form-control mt-1" [(ngModel)]="examination_date" [ngModelOptions]="{standalone: true}">
        </div>
        <div class="form-group">
            <label for="username">Biểu hiện</label>
            <input [disabled]="true" class="form-control mt-1" [(ngModel)]="symptom_description" [ngModelOptions]="{standalone: true}">
        </div>
        <div class="form-group">
            <label for="username">Thời gian có triệu chứng</label>
            <input [disabled]="true" class="form-control mt-1" [(ngModel)]="symptoms_time" [ngModelOptions]="{standalone: true}">
        </div>
        <div class="form-group">
            <label for="username">Nhiệt độ cơ thể</label>
            <input [disabled]="true" class="form-control mt-1" [(ngModel)]="body_temperature" [ngModelOptions]="{standalone: true}">
        </div>
        <div class="form-group">
            <label for="username">Kết quả kiểm tra</label>
            <input [disabled]="true" class="form-control mt-1" [(ngModel)]="test_results" [ngModelOptions]="{standalone: true}">
        </div>
        <div class="form-group">
            <label for="username">Kết quả test lại</label>
            <input [disabled]="true" class="form-control mt-1" [(ngModel)]="re_examination" [ngModelOptions]="{standalone: true}">
        </div>
    </div>
    <div class="modal-footer">
        <div class="operate-btn">
          <button type="button" class="btn btn-danger mt-3" (click)="closeDialog()">Đóng</button>
        </div>
    </div>
    </form>
</ng-template>